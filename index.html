<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>큐브미 REMAKE</title>
    <link href="common.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="icon" sizes="16x16 32x32" href="images/favicon.ico">
    
    <style>
        #main_1 {
            background-image: url(images/main_banner.jpg);
            transition: .5s;
        }
        #main_1 .main_1_content {
            width: 33.33%; 
            height: 100%; 
            background-color: rgba(0,0,0,.5); 
            float: left; 
            border-right: 1px solid #fff; 
            box-sizing: border-box; 
            font-size: 5em; 
            color: #fff; 
            text-align: center; 
            line-height: 50rem; 
            cursor: pointer;
            transition: 1s;
            position: relative;
        }
        #main_1 .main_1_content::first-letter {text-decoration-line: underline; text-decoration-color: #fff;}
        #main_1 .main_1_content:hover::first-letter {text-decoration-color: #000;}
        #main_1 .main_1_content:last-child {border: 0;}
        #main_1 .main_1_content:hover {transform-origin: 0 100%; line-height: 100rem; background-color: transparent;}
        #main_1 .product_img {
            position: absolute;
            top: 20%; 
            left: 30%;
            background-repeat: no-repeat; 
            background-size: contain; 
            width: 300px;
            height: 1046px;
            opacity: 0;
            transition: 1s;
        }
        #main_1 .main_1_content:hover .product_img {opacity: 1;}
        #main_1 .main_1_content:nth-child(1) .product_img {background-image: url(images/product_collagen.png);}
        #main_1 .main_1_content:nth-child(2) .product_img {background-image: url(images/product_block.png);}
        #main_1 .main_1_content:nth-child(3) .product_img {background-image: url(images/product_perfect.png);}
        
        #main_2 .main_2_content {}
        #main_2 .main_2_content >div {
            position: absolute;
            
        }
        #main_2 .main_2_content:nth-child(1) .main_2_img:nth-child(1) {background-image: url(images/skin1.jpg);}
        #main_2 .main_2_content:nth-child(1) .main_2_img:nth-child(2) {background-image: url(images/skin2.jpg);}
        #main_2 .main_2_content:nth-child(2) .main_2_img:nth-child(1) {background-image: url(images/skin1.jpg);}
        #main_2 .main_2_content:nth-child(2) .main_2_img:nth-child(2) {background-image: url(images/skin2.jpg);}
    </style>
    
</head>
<body>
    <div id="header"></div>
    
    <div id="main">
        <div class="main_box" id="main_1">
            <div class="main_1_content">COLLAGEN CUBE
                <div class="product_img"></div></div>
            <div class="main_1_content">BLOCK CUBE
                <div class="product_img"></div></div>
            <div class="main_1_content">PERFECT CUBE
                <div class="product_img"></div></div>
        </div>
        <div class="main_box" id="main_2">
            <div class="main_2_content">
                <div class="main_2_img"></div>
                <div class="main_2_img"></div>
                <div>속부터 시작하는</div>
                <div>BEAUTY SKIN</div>
            </div>
            <div class="main_2_content">
                <div class="main_2_img"></div>
                <div class="main_2_img"></div>
                <div>속부터 시작하는</div>
                <div>SLIM BODY</div>
            </div>
        </div>
    </div>
    
    <div id="footer"></div>
    
</body>
    
    <script>
        $(document).ready( function() {
            $("#header").load("header.html");
            $("#footer").load("footer.html");
            
            scroll100per();
        });
        
        $('#main_1 .main_1_content').mouseover(function(){
            var index = $(this).index()+1;
            $('#main_1 .main_1_content:not(:nth-child('+index+'))').css({'width':'25%'});
            $('#main_1 .main_1_content:nth-child('+index+')').css({'width':'50%'});
            switch(index) {
                case 1:
                    $('#main_1').css({'background-image':'url(images/pattern_cube_collagen.jpg)'});
                    break;
                case 2:
                    $('#main_1').css({'background-image':'url(images/pattern_cube_block.jpg)'});
                    break;
                case 3:
                    $('#main_1').css({'background-image':'url(images/pattern_cube_perfect.jpg)'});
                    break;
            }
        });
        $('#main_1 .main_1_content').mouseleave(function(){
            $('#main_1 .main_1_content').css({'width':'33.33%'});
            $('#main_1').css({'background-image':'url(images/main_banner.jpg)'});
        });

        function scroll100per(){
            var elm = "#main";
            $(elm).each(function (index) {
                // 개별적으로 Wheel 이벤트 적용
                $(this).on("mousewheel DOMMouseScroll", function (e) {
                    e.preventDefault();
                    var delta = 0;
                    if (!event) event = window.event;
                    if (event.wheelDelta) {
                        delta = event.wheelDelta / 120;
                        if (window.opera) delta = -delta;
                    } 
                    else if (event.detail)
                        delta = -event.detail / 3;
                    var moveTop = $(window).scrollTop();
                    var elmSelecter = $(elm).eq(index);
                    // 마우스휠을 위에서 아래로
                    if (delta < 0) {
                        if ($(elmSelecter).next() != undefined) {
                            try{
                                moveTop += 1080; //$(elmSelecter).next().offset().top;
                            }catch(e){}
                        }
                    // 마우스휠을 아래에서 위로
                    } else {
                        if ($(elmSelecter).prev() != undefined) {
                            try{
                                moveTop -= 1080;//$(elmSelecter).prev().offset().top;
                            }catch(e){}
                        }
                    }
                    // 화면 이동 0.8초(800)
                    $("html,body").stop().animate({
                        scrollTop: moveTop + 'px'
                    }, {
                        duration: 800, complete: function () {
                        }
                    });
                });
            });
        }
        
        $('.flying_ani').wrap('<div class="flying_ani_wrap"></div>');
        function flying_ani_initial() {
            $('.flying_ani_wrap:nth-child(2n+1)').css({'transform':'translate(-150%)'});
            $('.flying_ani_wrap:nth-child(2n)').css({'transform':'translate(150%)'});
            $('.flying_ani_wrap').css({'transition':'1s'});
        }
        window.addEventListener('scroll', function() {
            var flying_ani_wrap = document.getElementsByClassName('flying_ani_wrap');
            var adjust = 800;
            
            for(i=0; i<flying_ani_wrap.length; i++) {
                if(flying_ani_wrap[i].offsetTop-adjust <= window.pageYOffset) {
                    $(flying_ani_wrap[i]).css({
                        'transform' : 'translateX(0%)'
                    })}}
            if(window.pageYOffset == 0) {flying_ani_initial();}
        });
        
    </script>
</html>